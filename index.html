<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="theme-color" id="themeMeta" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <title>–ü–æ–º–ø–æ–Ω—á–∏–∫ ¬∑ —Å–æ—Ü—Å–µ—Ç–∏ + –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      min-height: 100vh;
      background: #000000;
      position: relative;
      overscroll-behavior: none;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
    }

    /* ----- –ö–ê–ù–í–ê–° (–í–°–ï–ì–î–ê –°–ó–ê–î–ò) ----- */
    #effect-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 5;
      pointer-events: none;
      transform: translateZ(0);
      will-change: transform;
      backface-visibility: hidden;
    }

    /* ----- –ö–ê–†–¢–û–ß–ö–ê (–î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –¶–í–ï–¢) ----- */
    .card {
      position: relative;
      z-index: 20;
      max-width: 600px;
      width: 100%;
      background: rgba(var(--bg-rgb, 10, 10, 15), 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(var(--accent-rgb, 160, 130, 255), 0.4);
      box-shadow: 0 20px 40px rgba(0,0,0,0.8), 0 0 0 1px rgba(var(--accent-rgb, 170, 0, 255), 0.1) inset;
      border-radius: 48px;
      padding: 32px 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.2s, border 0.2s, box-shadow 0.2s;
    }

    /* ----- –ê–í–ê–¢–ê–† ----- */
    .avatar {
      width: clamp(100px, 28vw, 120px);
      height: clamp(100px, 28vw, 120px);
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid rgba(var(--accent-rgb, 180, 130, 255), 0.8);
      box-shadow: 0 0 30px rgba(var(--accent-rgb, 159, 75, 255), 0.7);
      margin-bottom: 16px;
      background: #1a0f2a;
    }

    /* ----- –†–ê–î–£–ñ–ù–û–ï –ò–ú–Ø (–ê–ù–ò–ú–ê–¶–ò–Ø) ----- */
    @keyframes rainbow {
      0% { color: #ff66aa; text-shadow: 0 0 15px #ff66aa, 0 0 30px #ff44aa; }
      20% { color: #ffaa66; text-shadow: 0 0 15px #ffaa66, 0 0 30px #ff8844; }
      40% { color: #66ffaa; text-shadow: 0 0 15px #66ffaa, 0 0 30px #44ff88; }
      60% { color: #66aaff; text-shadow: 0 0 15px #66aaff, 0 0 30px #4488ff; }
      80% { color: #aa66ff; text-shadow: 0 0 15px #aa66ff, 0 0 30px #8844ff; }
      100% { color: #ff66cc; text-shadow: 0 0 15px #ff66cc, 0 0 30px #ff44aa; }
    }

    .display-name {
      font-size: clamp(26px, 8vw, 32px);
      font-weight: 800;
      animation: rainbow 6s infinite linear;
      letter-spacing: 2px;
      margin-bottom: 8px;
      line-height: 1.2;
      text-align: center;
    }

    /* ----- –°–ï–¢–ö–ê –°–û–¶–°–ï–¢–ï–ô (–ê–î–ê–ü–¢–ò–í–ù–ê–Ø) ----- */
    .links-grid {
      display: grid;
      gap: 16px;
      width: 100%;
      margin: 24px 0 20px;
    }
    
    /* –¢–µ–ª–µ—Ñ–æ–Ω: –∞–≤—Ç–æ-–ø–æ–¥–≥–æ–Ω–∫–∞ */
    .links-grid.phone-layout {
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    }
    
    /* –ü–ö: —Å–µ—Ç–∫–∞ 2x2 */
    .links-grid.pc-layout {
      grid-template-columns: repeat(2, 1fr);
    }

    .social-item {
      background: rgba(var(--social-bg-rgb, 20, 15, 35), 0.75);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(var(--accent-rgb, 200, 160, 255), 0.35);
      border-radius: 24px;
      padding: 16px 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: white;
      box-shadow: 0 6px 0 rgba(var(--shadow-rgb, 0, 0, 0), 0.5);
      transition: all 0.15s;
      min-height: 140px;
    }

    @media (hover: hover) {
      .social-item:hover {
        background: rgba(var(--accent-rgb, 90, 40, 140), 0.7);
        border-color: rgba(var(--accent-rgb, 201, 123, 255), 0.9);
        box-shadow: 0 0 25px rgba(var(--accent-rgb, 178, 66, 250), 0.8), 0 6px 0 rgba(var(--shadow-rgb, 42, 10, 58), 0.7);
        transform: translateY(-3px);
      }
    }

    .social-item:active {
      transform: translateY(2px);
      box-shadow: 0 2px 0 rgba(var(--shadow-rgb, 42, 10, 58), 0.7);
    }

    .icon { font-size: 36px; margin-bottom: 8px; }
    .social-name { font-weight: 700; font-size: 18px; margin-bottom: 6px; }
    .username {
      font-size: 14px;
      font-weight: 500;
      background: rgba(255,255,255,0.12);
      padding: 6px 14px;
      border-radius: 100px;
      border: 1px solid rgba(255,200,255,0.3);
      color: #f0e6ff;
      max-width: 100%;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      backdrop-filter: blur(4px);
    }

    /* ----- SOON ----- */
    .soon-item {
      background: rgba(15,10,25,0.85);
      border: 1px dashed rgba(var(--accent-rgb, 200,130,255), 0.7);
      cursor: default;
    }
    .soon-question { font-size: 36px; font-weight: 800; color: #e0c0ff; text-shadow: 0 0 12px rgba(var(--accent-rgb, 178,102,255), 0.8); }
    .soon-label {
      font-size: 22px; font-weight: 800; color: #d9b3ff;
      background: rgba(0,0,0,0.3); padding: 4px 18px; border-radius: 40px;
      border: 1px solid rgba(var(--accent-rgb, 184,122,255), 0.8);
      margin: 6px 0;
    }

    /* ----- –ö–ù–û–ü–ö–ê –û–¢–ö–†–´–¢–¨ –ù–ê–°–¢–†–û–ô–ö–ò ----- */
    .settings-toggle-btn {
      background: rgba(var(--accent-rgb, 80, 50, 140), 0.5);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(var(--accent-rgb, 200,130,255), 0.6);
      color: white;
      font-size: 18px;
      font-weight: 600;
      padding: 16px 24px;
      border-radius: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      cursor: pointer;
      transition: 0.2s;
      margin-bottom: 16px;
      border: 1px solid rgba(var(--accent-rgb, 200,130,255), 0.6);
    }
    .settings-toggle-btn:active { transform: scale(0.98); background: rgba(var(--accent-rgb, 100, 60, 160), 0.7); }

    /* ----- –ü–ê–ù–ï–õ–¨ –ù–ê–°–¢–†–û–ï–ö ----- */
    .settings-panel {
      width: 100%;
      background: rgba(5, 3, 15, 0.9);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(var(--accent-rgb, 170, 130, 255), 0.6);
      border-radius: 40px;
      padding: 24px 20px;
      margin-top: 16px;
      display: none;
      flex-direction: column;
      gap: 24px;
    }

    .settings-panel.active {
      display: flex;
    }

    .settings-section {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .settings-title {
      color: white;
      font-size: 20px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid rgba(var(--accent-rgb, 170,130,255), 0.5);
      padding-bottom: 10px;
    }

    .settings-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .settings-label {
      color: #e0d0ff;
      font-size: 16px;
      font-weight: 600;
    }

    /* ----- –¶–í–ï–¢–û–í–´–ï –ü–†–ï–°–ï–¢–´ ----- */
    .color-presets {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .color-dot {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      cursor: pointer;
      border: 3px solid transparent;
      transition: 0.1s;
      box-shadow: 0 0 15px rgba(255,255,255,0.3);
    }
    .color-dot:hover { transform: scale(1.1); }
    .color-dot.active { border: 3px solid white; box-shadow: 0 0 25px white; }

    /* ----- –†–ê–î–ò–û –ì–†–£–ü–ü–´ ----- */
    .radio-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .radio-item {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(50,30,80,0.6);
      padding: 10px 20px;
      border-radius: 40px;
      border: 1px solid rgba(var(--accent-rgb, 200,130,255), 0.6);
      color: white;
      cursor: pointer;
    }
    .radio-item input[type="radio"] {
      accent-color: rgba(var(--accent-rgb, 196,122,255), 1);
      width: 18px;
      height: 18px;
      margin: 0;
    }

    .device-btn {
      background: linear-gradient(145deg, #1e102e, #14081f);
      border: 1px solid rgba(var(--accent-rgb, 178,102,255), 0.9);
      color: white;
      font-size: 18px;
      font-weight: 600;
      padding: 16px 24px;
      border-radius: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      width: 100%;
      cursor: pointer;
    }

    /* ----- –°–¢–ï–ù–ê –°–û–û–ë–©–ï–ù–ò–ô ----- */
    .messages-wall {
      width: 100%;
      margin-top: 20px;
      background: rgba(10, 5, 20, 0.7);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(var(--accent-rgb, 170,130,255), 0.5);
      border-radius: 32px;
      padding: 20px;
    }

    .messages-header {
      display: flex;
      align-items: center;
      gap: 12px;
      color: white;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 16px;
      border-bottom: 1px solid rgba(var(--accent-rgb, 170,130,255), 0.3);
      padding-bottom: 12px;
    }

    .messages-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 250px;
      overflow-y: auto;
      padding-right: 8px;
      margin-bottom: 16px;
    }

    .message-item {
      background: rgba(30, 20, 50, 0.6);
      border: 1px solid rgba(var(--accent-rgb, 200,130,255), 0.3);
      border-radius: 18px;
      padding: 12px 16px;
      color: #f0e6ff;
      font-size: 14px;
      word-break: break-word;
    }

    .message-time {
      color: rgba(var(--accent-rgb, 170,130,255), 0.9);
      font-size: 12px;
      font-weight: 600;
      margin-right: 8px;
    }

    .message-text {
      color: white;
    }

    .message-input-area {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .message-input {
      flex: 1;
      background: rgba(20, 10, 35, 0.8);
      border: 1px solid rgba(var(--accent-rgb, 200,130,255), 0.5);
      border-radius: 30px;
      padding: 14px 20px;
      color: white;
      font-size: 15px;
      outline: none;
      transition: 0.2s;
    }

    .message-input:focus {
      border-color: rgba(var(--accent-rgb, 200,130,255), 1);
      box-shadow: 0 0 15px rgba(var(--accent-rgb, 159,75,255), 0.5);
    }

    .message-send-btn {
      background: rgba(var(--accent-rgb, 80,50,140), 0.8);
      border: 1px solid rgba(var(--accent-rgb, 200,130,255), 0.7);
      border-radius: 40px;
      padding: 0 24px;
      color: white;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: 0.2s;
    }

    .message-send-btn:active {
      transform: scale(0.95);
      background: rgba(var(--accent-rgb, 100,60,160), 0.9);
    }

    .footer-note {
      margin-top: 20px;
      color: rgba(210,180,255,0.7);
      font-size: 13px;
      text-align: center;
      border-top: 1px solid rgba(var(--accent-rgb, 170,0,255), 0.2);
      padding-top: 18px;
      width: 100%;
    }

    @media (max-width: 480px) {
      .card { padding: 24px 18px; }
      .color-dot { width: 42px; height: 42px; }
    }
  </style>
</head>
<body>

  <canvas id="effect-canvas"></canvas>

  <div class="card" id="mainCard">

    <!-- –ê–í–ê–¢–ê–†–ö–ê - –ó–ê–ì–†–£–ó–ö–ê –° GITHUB -->
    <img class="avatar" id="avatarImg" src="avatar.jpg" alt="–ü–æ–º–ø–æ–Ω—á–∏–∫" loading="lazy" width="120" height="120" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22200%22%20height%3D%22200%22%3E%3Ccircle%20cx%3D%22100%22%20cy%3D%22100%22%20r%3D%22100%22%20fill%3D%22%23b266ff%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20font-size%3D%2280%22%20text-anchor%3D%22middle%22%20dy%3D%22.3em%22%20fill%3D%22white%22%3E%F0%9F%90%B6%3C%2Ftext%3E%3C%2Fsvg%3E';">

    <!-- –†–ê–î–£–ñ–ù–û–ï –ò–ú–Ø -->
    <div class="display-name">–ü–æ–º–ø–æ–Ω—á–∏–∫</div>

    <!-- –°–û–¶–°–ï–¢–ò (–°–ï–¢–ö–ê –ú–ï–ù–Ø–ï–¢–°–Ø –ß–ï–†–ï–ó JS) -->
    <div class="links-grid" id="linksGrid">
      <a href="https://tiktok.com/@pablo.love78" target="_blank" rel="noopener" class="social-item">
        <div class="icon">üéµ</div><div class="social-name">TikTok</div><div class="username">@pablo.love78</div>
      </a>
      <a href="https://t.me/DaneckaMolosec" target="_blank" rel="noopener" class="social-item">
        <div class="icon">üì±</div><div class="social-name">Telegram</div><div class="username">@DaneckaMolosec</div>
      </a>
      <a href="https://discord.com/users/war_tuc" target="_blank" rel="noopener" class="social-item">
        <div class="icon">üí¨</div><div class="social-name">Discord</div><div class="username">@war_tuc</div>
      </a>
      <div class="social-item soon-item">
        <div class="soon-question">‚ùì</div><div class="soon-label">SOON</div><div style="font-size:12px; color:#c7aaff;">—á–µ—Ç–≤—ë—Ä—Ç–∞—è —Å–µ—Ç—å</div>
      </div>
    </div>

    <!-- –ö–ù–û–ü–ö–ê –î–õ–Ø –û–¢–ö–†–´–¢–ò–Ø –ù–ê–°–¢–†–û–ï–ö -->
    <button class="settings-toggle-btn" id="toggleSettingsBtn">
      <span style="font-size:24px;">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    </button>

    <!-- ========== –ü–û–õ–ù–û–¶–ï–ù–ù–ê–Ø –í–ö–õ–ê–î–ö–ê –ù–ê–°–¢–†–û–ï–ö ========== -->
    <div class="settings-panel" id="settingsPanel">

      <!-- 1. –¶–í–ï–¢ –ò–ù–¢–ï–†–§–ï–ô–°–ê -->
      <div class="settings-section">
        <div class="settings-title"><span style="font-size:28px;">üé®</span> –¶–≤–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</div>
        <div class="settings-row">
          <span class="settings-label">–ê–∫—Ü–µ–Ω—Ç:</span>
          <div class="color-presets" id="colorPresets">
            <div class="color-dot" style="background: #9f4bff;" data-color="purple" data-accent="160,130,255" data-bg="10,10,15" data-shadow="0,0,0" data-pink="255,153,204"></div>
            <div class="color-dot" style="background: #ff66aa;" data-color="pink" data-accent="255,102,170" data-bg="20,8,15" data-shadow="80,20,40" data-pink="255,153,204"></div>
            <div class="color-dot" style="background: #33cc99;" data-color="green" data-accent="51,204,153" data-bg="8,20,15" data-shadow="0,40,20" data-pink="204,255,153"></div>
            <div class="color-dot" style="background: #ffaa33;" data-color="orange" data-accent="255,170,51" data-bg="25,15,8" data-shadow="60,30,0" data-pink="255,204,153"></div>
            <div class="color-dot" style="background: #3399ff;" data-color="blue" data-accent="51,153,255" data-bg="8,15,30" data-shadow="0,30,70" data-pink="153,204,255"></div>
          </div>
        </div>
      </div>

      <!-- 2. –ß–ê–°–¢–ò–¶–´ -->
      <div class="settings-section">
        <div class="settings-title"><span style="font-size:28px;">‚ú®</span> –ß–∞—Å—Ç–∏—Ü—ã —Ñ–æ–Ω–∞</div>
        <div class="settings-row">
          <span class="settings-label">–¢–∏–ø:</span>
          <div class="radio-group" id="particleRadios">
            <label class="radio-item"><input type="radio" name="effect" value="purple" checked> ‚ú¶ –§–∏–æ–ª–µ—Ç–æ–≤—ã–µ</label>
            <label class="radio-item"><input type="radio" name="effect" value="snow"> ‚ùÑÔ∏è –°–Ω–µ–∂–∏–Ω–∫–∏</label>
            <label class="radio-item"><input type="radio" name="effect" value="off"> üåë –í—ã–∫–ª—é—á–µ–Ω—ã</label>
          </div>
        </div>
      </div>

      <!-- 3. –£–°–¢–†–û–ô–°–¢–í–û (–¢–ï–õ–ï–§–û–ù/–ü–ö) -->
      <div class="settings-section">
        <div class="settings-title"><span style="font-size:28px;">üì±üñ•Ô∏è</span> –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</div>
        <div class="settings-row">
          <span class="settings-label">–†–µ–∂–∏–º:</span>
          <div class="radio-group" id="deviceRadios">
            <label class="radio-item"><input type="radio" name="device" value="phone"> üì± –¢–µ–ª–µ—Ñ–æ–Ω</label>
            <label class="radio-item"><input type="radio" name="device" value="pc"> üñ•Ô∏è –ö–æ–º–ø—å—é—Ç–µ—Ä</label>
          </div>
        </div>
        <button class="device-btn" id="applyDeviceBtn">üíæ –ó–∞–ø–æ–º–Ω–∏—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </div>
    </div>

    <!-- ========== –°–¢–ï–ù–ê –°–û–û–ë–©–ï–ù–ò–ô ========== -->
    <div class="messages-wall">
      <div class="messages-header">
        <span>üí¨</span> –°—Ç–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
      </div>
      
      <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –° –°–û–û–ë–©–ï–ù–ò–Ø–ú–ò -->
      <div class="messages-container" id="messagesContainer">
        <!-- –°–û–û–ë–©–ï–ù–ò–Ø –ë–£–î–£–¢ –î–û–ë–ê–í–õ–Ø–¢–¨–°–Ø –°–Æ–î–ê –ß–ï–†–ï–ó JS -->
      </div>
      
      <!-- –ü–û–õ–ï –í–í–û–î–ê –ò –ö–ù–û–ü–ö–ê -->
      <div class="message-input-area">
        <input type="text" class="message-input" id="messageInput" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="100">
        <button class="message-send-btn" id="sendMessageBtn">
          <span>‚û§</span> –û—Ç–ø—Ä.
        </button>
      </div>
    </div>

    <div class="footer-note">‚ãÜÀö‚úøÀñ¬∞ –ü–æ–º–ø–æ–Ω—á–∏–∫ ‚úøÀö‚ãÜ</div>
  </div>

  <script>
    (function() {
      "use strict";

      // -----------------------------------------------------
      // 1. –ù–ê–°–¢–†–û–ô–ö–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê, –¶–í–ï–¢–ê, –ß–ê–°–¢–ò–¶–´
      // -----------------------------------------------------
      const canvas = document.getElementById('effect-canvas');
      const ctx = canvas.getContext('2d');
      const card = document.getElementById('mainCard');
      const metaTheme = document.getElementById('themeMeta');
      const linksGrid = document.getElementById('linksGrid');

      let width, height;
      let particles = [];
      let animationFrame = null;
      let currentEffect = 'purple';

      // -----------------------------------------------------
      // –°–û–°–¢–û–Ø–ù–ò–ï –¶–í–ï–¢–ê (–ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ –§–ò–û–õ–ï–¢–û–í–´–ô)
      // -----------------------------------------------------
      let currentColor = {
        accent: '160,130,255',
        bg: '10,10,15',
        shadow: '0,0,0',
        pink: '255,153,204'
      };

      // -----------------------------------------------------
      // 2. –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ö–õ–ê–î–ö–ò –ù–ê–°–¢–†–û–ï–ö
      // -----------------------------------------------------
      const toggleBtn = document.getElementById('toggleSettingsBtn');
      const settingsPanel = document.getElementById('settingsPanel');

      toggleBtn.addEventListener('click', function() {
        settingsPanel.classList.toggle('active');
        toggleBtn.style.background = settingsPanel.classList.contains('active') 
          ? 'rgba(var(--accent-rgb, 100,60,160), 0.8)' 
          : 'rgba(var(--accent-rgb, 80,50,140), 0.5)';
      });

      // -----------------------------------------------------
      // 3. –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –¶–í–ï–¢–ê
      // -----------------------------------------------------
      function applyColor(accentRgb, bgRgb, shadowRgb, pinkRgb) {
        card.style.setProperty('--accent-rgb', accentRgb);
        card.style.setProperty('--bg-rgb', bgRgb);
        card.style.setProperty('--shadow-rgb', shadowRgb);
        card.style.setProperty('--pink-rgb', pinkRgb);
        card.style.setProperty('--social-bg-rgb', bgRgb);
        
        if (metaTheme) metaTheme.setAttribute('content', `rgb(${accentRgb})`);
        
        document.querySelectorAll('.color-dot').forEach(dot => dot.classList.remove('active'));
        const activeDot = Array.from(document.querySelectorAll('.color-dot')).find(
          dot => dot.dataset.accent === accentRgb
        );
        if (activeDot) activeDot.classList.add('active');
        
        currentColor = { accent: accentRgb, bg: bgRgb, shadow: shadowRgb, pink: pinkRgb };
      }

      document.querySelectorAll('.color-dot').forEach(dot => {
        dot.addEventListener('click', function() {
          applyColor(
            this.dataset.accent,
            this.dataset.bg,
            this.dataset.shadow,
            this.dataset.pink
          );
        });
      });

      applyColor('160,130,255', '10,10,15', '0,0,0', '255,153,204');

      // -----------------------------------------------------
      // 4. –ß–ê–°–¢–ò–¶–´
      // -----------------------------------------------------
      function resizeCanvas() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
      }

      function initParticles() {
        if (!width || !height) return;
        if (currentEffect === 'off') { particles = []; return; }

        let count;
        if (currentEffect === 'snow') {
          count = Math.min(120, Math.floor(width * height / 7500));
          particles = Array.from({ length: count }, () => ({
            x: Math.random() * width, y: Math.random() * height,
            radius: Math.random() * 3 + 1.5,
            speedX: (Math.random() - 0.5) * 0.15,
            speedY: Math.random() * 0.7 + 0.3,
            color: `rgba(255,255,255,${Math.random() * 0.6 + 0.3})`
          }));
        } else {
          count = Math.min(110, Math.floor(width * height / 6500));
          particles = Array.from({ length: count }, () => ({
            x: Math.random() * width, y: Math.random() * height,
            radius: Math.random() * 3 + 1.2,
            speedX: (Math.random() - 0.5) * 0.3,
            speedY: (Math.random() - 0.5) * 0.25,
            color: `rgba(${170 + ~~(Math.random()*80)}, ${100 + ~~(Math.random()*70)}, 255, ${Math.random()*0.5+0.3})`
          }));
        }
      }

      function draw() {
        ctx.clearRect(0, 0, width, height);
        if (currentEffect !== 'off' && particles.length) {
          particles.forEach(p => {
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
            ctx.shadowColor = currentEffect === 'snow' ? 'rgba(220,240,255,0.9)' : '#b266ff';
            ctx.shadowBlur = 12;
            ctx.fillStyle = p.color;
            ctx.fill();
            p.x += p.speedX; p.y += p.speedY;
            if (p.x < -20) p.x = width + 20;
            if (p.x > width + 20) p.x = -20;
            if (p.y < -20) p.y = height + 20;
            if (p.y > height + 20) p.y = -20;
          });
        }
        animationFrame = requestAnimationFrame(draw);
      }

      function setEffect(effect) {
        currentEffect = effect;
        initParticles();
      }

      document.querySelectorAll('input[name="effect"]').forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.checked) setEffect(this.value);
        });
      });

      // -----------------------------------------------------
      // 5. –£–°–¢–†–û–ô–°–¢–í–û (–° –ó–ê–ü–û–ú–ò–ù–ê–ù–ò–ï–ú –í LOCALSTORAGE)
      // -----------------------------------------------------
      const deviceRadios = document.querySelectorAll('input[name="device"]');
      const applyDeviceBtn = document.getElementById('applyDeviceBtn');
      
      // –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏
      function applyDeviceLayout(isPhone) {
        if (isPhone) {
          linksGrid.classList.add('phone-layout');
          linksGrid.classList.remove('pc-layout');
        } else {
          linksGrid.classList.add('pc-layout');
          linksGrid.classList.remove('phone-layout');
        }
      }

      // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      function saveDevicePreference(deviceValue) {
        localStorage.setItem('pomponchik_device', deviceValue);
      }

      // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      function loadDevicePreference() {
        const savedDevice = localStorage.getItem('pomponchik_device');
        if (savedDevice === 'pc') {
          document.querySelector('input[name="device"][value="pc"]').checked = true;
          applyDeviceLayout(false);
          return false; // –ü–ö
        } else if (savedDevice === 'phone') {
          document.querySelector('input[name="device"][value="phone"]').checked = true;
          applyDeviceLayout(true);
          return true; // –¢–µ–ª–µ—Ñ–æ–Ω
        } else {
          // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π - –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
          const isPhone = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
          if (isPhone) {
            document.querySelector('input[name="device"][value="phone"]').checked = true;
            applyDeviceLayout(true);
          } else {
            document.querySelector('input[name="device"][value="pc"]').checked = true;
            applyDeviceLayout(false);
          }
          return isPhone;
        }
      }

      // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
      applyDeviceBtn.addEventListener('click', function() {
        let isPhone = true;
        let deviceValue = 'phone';
        
        deviceRadios.forEach(r => { 
          if (r.checked) {
            deviceValue = r.value;
            if (r.value === 'pc') isPhone = false;
          }
        });
        
        applyDeviceLayout(isPhone);
        saveDevicePreference(deviceValue);
        
        alert(`‚úÖ –†–µ–∂–∏–º: ${isPhone ? '–¢–µ–ª–µ—Ñ–æ–Ω' : '–ö–æ–º–ø—å—é—Ç–µ—Ä'} —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∏ –ø—Ä–∏–º–µ–Ω—ë–Ω!`);
        if (navigator.vibrate) navigator.vibrate(20);
      });

      // -----------------------------------------------------
      // 6. –°–¢–ï–ù–ê –°–û–û–ë–©–ï–ù–ò–ô (–° –•–†–ê–ù–ï–ù–ò–ï–ú –í LOCALSTORAGE)
      // -----------------------------------------------------
      const messagesContainer = document.getElementById('messagesContainer');
      const messageInput = document.getElementById('messageInput');
      const sendMessageBtn = document.getElementById('sendMessageBtn');

      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ localStorage
      function loadMessages() {
        const savedMessages = localStorage.getItem('pomponchik_messages');
        if (savedMessages) {
          try {
            const messages = JSON.parse(savedMessages);
            messagesContainer.innerHTML = '';
            messages.forEach(msg => {
              addMessageToWall(msg.text, msg.time, false);
            });
          } catch(e) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π');
          }
        } else {
          // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
          const welcomeMsg = {
            text: '‚ú® –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Å—Ç–µ–Ω—É –ü–æ–º–ø–æ–Ω—á–∏–∫–∞!',
            time: getCurrentTime()
          };
          addMessageToWall(welcomeMsg.text, welcomeMsg.time, true);
        }
      }

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ localStorage
      function saveMessages() {
        const messageElements = messagesContainer.querySelectorAll('.message-item');
        const messages = [];
        
        messageElements.forEach(el => {
          const timeEl = el.querySelector('.message-time');
          const textEl = el.querySelector('.message-text');
          if (timeEl && textEl) {
            messages.push({
              time: timeEl.textContent.replace(':', '').trim(),
              text: textEl.textContent
            });
          }
        });
        
        localStorage.setItem('pomponchik_messages', JSON.stringify(messages));
      }

      // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:–ú–ú
      function getCurrentTime() {
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        return `${hours}:${minutes}`;
      }

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å—Ç–µ–Ω—É
      function addMessageToWall(text, time, shouldSave = true) {
        if (!text.trim()) return;
        
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message-item';
        
        const timeSpan = document.createElement('span');
        timeSpan.className = 'message-time';
        timeSpan.textContent = `*${time || getCurrentTime()}*:`;
        
        const textSpan = document.createElement('span');
        textSpan.className = 'message-text';
        textSpan.textContent = ` ${text}`;
        
        messageDiv.appendChild(timeSpan);
        messageDiv.appendChild(textSpan);
        messagesContainer.appendChild(messageDiv);
        
        // –°–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        if (shouldSave) saveMessages();
      }

      // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
      function sendMessage() {
        const text = messageInput.value.trim();
        if (text) {
          const time = getCurrentTime();
          addMessageToWall(text, time, true);
          messageInput.value = '';
        }
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
      sendMessageBtn.addEventListener('click', sendMessage);
      
      messageInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          sendMessage();
        }
      });

      // -----------------------------------------------------
      // 7. –°–¢–ê–†–¢
      // -----------------------------------------------------
      resizeCanvas();
      initParticles();
      draw();

      window.addEventListener('resize', function() {
        resizeCanvas();
        if (currentEffect !== 'off') initParticles();
      });

      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
      loadDevicePreference();
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
      loadMessages();
      
      // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
      if (!document.getElementById('deviceIcon')) {
        const fakeDiv = document.createElement('div');
        fakeDiv.id = 'deviceIcon';
        fakeDiv.style.display = 'none';
        document.body.appendChild(fakeDiv);
      }
      
      if (!document.getElementById('deviceText')) {
        const fakeDiv2 = document.createElement('div');
        fakeDiv2.id = 'deviceText';
        fakeDiv2.style.display = 'none';
        document.body.appendChild(fakeDiv2);
      }
    })();
  </script>

  <!-- –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ -->
  <div id="deviceIcon" style="display:none;">üì±</div>
  <div id="deviceText" style="display:none;">–¢—ã —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
  <div id="deviceButton" style="display:none;"></div>

</body>
</html>
